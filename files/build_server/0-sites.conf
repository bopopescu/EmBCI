#
# Apache2 configurtion on armbian
# 
# replacement for sites-available/000-default.conf
# hankso
# email: 3080863354@qq.com
# page: https://github.com/hankso
#


<Macro MyMacro $host $port $project $dir>
	Listen $port
	<VirtualHost *:$port>
		ServerName $host
		ServerAlias www.$host
		ServerAdmin 3080863354@qq.com
		
		DirectoryIndex index.html
		DocumentRoot /var/www/$project
		<Directory /var/www/$project>
			Require all granted
		</Directory>

		WSGIDaemonProcess $project user=www-data group=www-data processes=1 threads=5
		WSGIProcessGroup $project
		WSGIApplicationGroup $project

		# WSGIScriptAlias /app $dir/app.wsgi
		# WSGIScriptAlias /wsgi $dir
		WSGIScriptAliasMatch /app/([^/]+) $dir/$1.wsgi
		<Directory $dir/>
			# Options Indexes FollowSymLinks
			Require all granted
		</Directory>

		Alias /download $dir/download

		ErrorLog  /var/www/$project/error.log
		CustomLog /var/www/$project/access.log combined

	</VirtualHost>
</Macro>

#	MacroName	host		port	project	dir
Use	MyMacro		hankso.com	80		pyemg	/home/hank/programs/pyemg/webserver

# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
